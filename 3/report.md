# 编程报告

## 1.0.0 版本

>根据提示，上网查询了有关Toleft的相关定义与解释后，参考网络上的算法解释，自己完成了第一个版本的程序。本题中可以使用二分查找的原因为：对于坐标轴上任意四个可以两两连接的点，因为任意两条线不会有交点，所以所有的连线会呈现出从靠近原点到远离远点的趋势。这样连线就可视为有序组。
>我在二分查找的实现上遇到了一些问题，在参考了教材并思考后，我向二分搜索加入了两个变量，利用每一条连线将第一象限分块，两个变量分别记录区域左侧和右侧的连线编号。当判断出点在某条连线的右侧时，便记录该连线编号l;如果在右侧则记录为r。最后l和r的差为1时说明已经确认了区域编号，从而便可以获得交点的个数。
>时间复杂度为O(nlogn)，空间复杂度为O(1)
>1.0.0版本得分为零，因为有严重的错误。

## 1.1.0 版本

>在1.0.0版本中，我犯了致命的错误：所有输入的数据并不确定是从小到大排好序的。需要实现进行排序。参考了教材上的归并排序算法，在程序中加入了排序。
>与此同时，二分查找的算法中移除了一个额外引入的变量，仅通过一个变量就可以得到最终结果。
>归并排序的时间复杂度为O(nlogn)，总体时间复杂度不变。空间复杂度因为排序的关系变成O(n)

## 1.1.3版本

>1.1.3版本去除了1.1.0版本中的bug，包括归并排序算法中的错误MergeSort(mi + 1,hi) 应为MergeSort(mi,hi);调用归并排序时输入的数组指针应为&x[0]，使用x不会产生效果。
>1.1.3版本在九成测中得分55。说明程序中存在问题。问题可能存在于二分查找的部分。

## 1.2.0版本

>根据观察，出错的部分都出自数据的大规模情况，怀疑在Toleft检测时计算乘法时超过了long long 的范围。经过构造样例证实了这个猜想。经过调整，Toleft中不再会出现超过数据类型的计算情况发生。

## 1.2.1版本

>在改动没有影响成绩的情况下，我再次分析程序后发现：自己防止Toleft计算出界的方法为直接除一个很大的数。但是因此产生的问题是，除完后最末尾的数字在计算时被忽略。影响了最终结果。需要找到更好的大整数乘法计算方法。

## 1.3.0版本

>为了满足大整数计算的需要，我将PA第一题的程序整合到了这题中，使得大整数的计算得以实现。计算的时间复杂度为O(1)，时间复杂度不变，空间复杂度上升。
>但是本次优化对成绩影响很小，只增加了10分，说明程序中仍存在问题。

## 1.3.1版本

>在与谈皓同学交流后，我去掉了大整数计算的部分，改为使用long long进行大整数的计算。但是成绩没有增加。

## 1.3.2版本

>考虑到long long类型在对两个2^31附近的数进行乘法后进行加减运算可能超过数据类型的界限，我将数据类型改为了unsigned long long。在进行Toleft检测时，放弃使用减法，而是使用加法并且比较两个unsigned long long的大小，防止数据出错。但是程序中依然有问题存在。

## 1.4.0版本

>在多次调试与检查无果，九成测还剩最后一次的情况下，我是用python按照谈皓同学的程序编写了对拍程序。并且修改了源程序中大整数计算的部分，加上了unsigned long long的强制转化。在对拍程序完成对拍，发现结果正确后，该版本在最后一次九成测中取得满分。
>程序中最大的问题出在了大整数运算的时候，没有将每一个乘数转换为unsigned long long类型。